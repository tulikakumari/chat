(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(7),c=n.n(r),o=n(5),i=n(3),u=(n(12),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{message:e,userType:t,responseName:n}}),h=[{step:0,name:"",botSays:u("Hi, I am here to help you.","bot"),validation:null},{step:1,name:"user",botSays:u("May I know your name?","bot"),validation:function(e){return!!e}},{step:2,name:"customerEmail",botSays:u("Where can you reach you, enter the email address?","bot"),validation:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{step:3,name:"customerQuery",botSays:u("Thanks for the info, type in the query you want me to forward to my team.","bot"),validation:function(e){return!!e}}],b=n(0),d=u("That's not quite right, please try again.","bot"),l=u("Thanks for filling out the form","bot"),m=Math.max.apply(Math,Object(i.a)(h.map((function(e){return e.step})))),j=function(){var e=Object(a.useState)([h[0].botSays]),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(1),c=Object(o.a)(r,2),j=c[0],p=c[1],f=Object(a.useState)(!0),y=Object(o.a)(f,2),O=y[0],v=y[1];Object(a.useEffect)((function(){var e=j===m+1;e&&(v(!1),function(){var e={user:n.find((function(e){return"user"===e.responseName})).message,customerEmail:n.find((function(e){return"customerEmail"===e.responseName})).message,customerQuery:n.find((function(e){return"customerQuery"===e.responseName})).message};fetch("http://localhost:3001/",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status)throw new Error("something went wrong");v(!1),s([].concat(Object(i.a)(n),[l]))})).catch((function(e){return console.error(e)}))}());var t=e?{botSays:l}:h.find((function(e){return e.step===j}));s([].concat(Object(i.a)(n),[t.botSays]))}),[j]);return Object(b.jsxs)("div",{className:"chat-widget",children:[Object(b.jsx)("header",{children:Object(b.jsx)("h3",{children:"Chat Support"})}),Object(b.jsx)("div",{className:"content",children:Object(b.jsx)("div",{className:"chats",children:n.map((function(e,t){return Object(b.jsx)("div",{className:"chat-bubble "+e.userType+"-bg",children:Object(b.jsx)("p",{children:e.message})},t)}))})}),Object(b.jsx)("div",{className:"message-box",children:O?Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.elements.query,a=t.value;if(a){var r=j+1,c=h.find((function(e){return e.step===j})),o=u(a,"user",c.name),b=[].concat(Object(i.a)(n),[o]);c.validation?c.validation(a)?p(r):b.push(d):p(r),s(b),t.value=""}},disabled:!0,children:[Object(b.jsx)("input",{type:"text",name:"query",placeholder:"Type your query"}),Object(b.jsx)("button",{type:"submit",children:"Send"})]}):Object(b.jsx)("div",{className:"chat-disabled",children:Object(b.jsx)("span",{children:"Chat has ended."})})})]})};c.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(j,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.aaf53831.chunk.js.map